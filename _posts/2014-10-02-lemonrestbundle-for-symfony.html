---
layout: post
title: LemonRestBundle for Symfony
date: 2014-10-02 18:24:21.000000000 -04:00
categories: []
tags: []
status: publish
type: post
published: true
meta:
  publicize_facebook_url: https://facebook.com/
  _wpas_done_6642642: '1'
  _publicize_done_external: a:1:{s:11:"google_plus";a:1:{s:21:"113947804306116461605";b:1;}}
  publicize_twitter_user: stanlemon
  publicize_twitter_url: http://t.co/T03BmPV3a7
  _wpas_done_3138877: '1'
  publicize_tumblr_url: http://stanlemon.tumblr.com.tumblr.com/post/99003961425
  _wpas_done_6642646: '1'
  _wpas_skip_path: '1'
  _publicize_pending: '1'
  publicize_google_plus_url: https://plus.google.com/113947804306116461605/posts/ASU9honpDrf
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _wpas_skip_linkedin: '1'
  _wpas_facebook_publicize_failure: O:13:"Keyring_Error":2:{s:16:"
author:
  login: stanlemon
  email: stosh1985@gmail.com
  display_name: stanlemon
  first_name: ''
  last_name: ''
---
<p>For a little while now I’ve been working on a bundle for Symfony to easily create REST apis for <a href="http://www.doctrine-project.org/projects/orm.html" target="_blank">Doctrine</a> entities. My goal was to be able to create a REST api with nothing more than a Doctrine entity and it’s metadata, including custom metadata from bundles like <a href="http://jmsyst.com/libs/serializer" target="_blank">JMS Serializer</a>. I wanted to invest very little time in the actual api part, and get to writing applications that used it. I’ve hit this wall before, and inevitably what happens is I make a valiant effort at rolling a REST api and then get distracted or bored and walk away leaving the project to rot.</p>
<p>Recently I was resurrecting an older project and wanting to do right by it and decided I could mask a lot of my database worts by leveraging some of Doctrine’s more advanced features. Specifically I added <a href="http://doctrine-orm.readthedocs.org/en/latest/cookbook/custom-mapping-types.html" target="_blank">custom types</a> to ensure I had good data structures, leveraged some <a href="http://doctrine-orm.readthedocs.org/en/latest/reference/events.html" target="_blank">lifecycle events</a> and implemented <a href="http://doctrine-orm.readthedocs.org/en/latest/tutorials/embeddables.html" target="_blank">Doctrine 2.5’s recent addition of Embeddables</a>. I had also added a bunch of validation to my entities using <a href="http://symfony.com/doc/current/book/validation.html" target="_blank">Symfony’s Validation component</a>, so they were well defined and could be validated easily with meaningful responses when things weren't right. I wound up with a clean set of objects that did what I wanted well, but there was one problem, I needed an api! Having been down this road before I wanted to solve my problem for the last time, or at the very least make the problem more interesting to solve.</p>
<p>Recently I have been playing with <a href="https://github.com/KnpLabs/KnpJsonSchemaBundle" target="_blank">Knp’s JSON Schema bundle</a> and this was in part my inspiration to make something that was <em>magical</em>. I don’t mean magical in the buzz word sense (okay, maybe I do). I mean magical in the highly <em>opinionated</em>, <em>convention driven</em> sort of way. My solution needed to <em>just work</em>(tm). The pieces were all there, and as I mentioned earlier the bulk of the tooling already existed, specifically great serialization, easy validation, reliable content negotiation and of course the graph traversal of Doctrine itself.  I just needed to get it all hooked into the request/response process of an api. Thus begot my very own REST bundle for Symfony 2.</p>
<p>Now hold up, I know what you’re thinking... Symfony already has <a href="https://github.com/FriendsOfSymfony/FOSRestBundle" target="_blank">a REALLY good REST bundle from Friends of Symfony</a>, doesn’t it? This is very true! That is an excellent bundle, it’s high powered and very flexible. <strong>Mine is not</strong>. In fact it’s not even intended to be. If you want <a href="https://github.com/willdurand/Hateoas" target="_blank">HATEOAS</a> for example, FOSRestBundle is the right option for you. If you need to customize the POST/PUT processes or alter extensively the behavior of your GET actions, then FOSRestBundle is going to be a far better option for you. If you want to use <a href="http://propelorm.org" target="_blank">Propel</a> or <a href="http://doctrine-mongodb-odm.readthedocs.org/en/latest/" target="_blank">Mongo</a> (though that may come in the future for mine) or any other data source besides Doctrine ORM than FOSRestBundle is the better option for you. If you are using Doctrine ORM and want to write as little code as possible while getting some REST endpoints, than my bundle might be the better option for you.</p>
<p>Enough chatter, <a href="https://github.com/stanlemon/rest-bundle/blob/master/Tests/Fixtures/Person.php" target="_blank">take a look at the fixtures included in my bundle</a> and you’ll see some very simple examples of what sort of metadata driven modeling I had in mind for this project. <a href="https://github.com/stanlemon/rest-bundle/blob/master/Tests/Controller/RestControllerTest.php" target="_blank">I have a pretty extensive functional test that shows how the bundle works.</a> I’ve also built a simple example application using this bundle that you can take a look at and see the bundle working. Well without further delay, I'm really happy to share with you <a href="https://github.com/stanlemon/rest-bundle" target="_blank">LemonRestBundle</a>, <a href="https://github.com/stanlemon/rest-bundle/blob/master/Resources/doc/index.md" target="_blank">documentation included</a>! Feedback is very welcome, feel free to drop me an email or <a href="http://twitter.com/stanlemon" target="_blank">shoot me a message on twitter</a>.</p>
